<!--The content below is only a placeholder and can be replaced.-->

<div class="container-fluid">
  <!-- Content here -->

  <div class="row">
    <div class="col">
      <h3 class="mt-4 mb-4">
        单据出入登记日常报表
        <button type="button" class="btn btn-outline-info btn-sm float-right" *ngIf="!isShowForm" (click)="showForm(true)">添加</button>
      </h3>
    </div>
  </div>


  <div class="row">
    <div class="col">
      <form [formGroup]="orderForm"  (keydown.enter)="$event.preventDefault()" *ngIf="isShowForm">

        <bs-select formControlName ="businessName" [fc]="orderForm.get('businessName')" [label]="'业务线:'"  [options]="businessNameList" [dirty]="ignoreDirty" [error]="orderFormError.businessName" ></bs-select>
        <bs-select formControlName ="shipName" [fc]="orderForm.get('shipName')" [label]="'船名:'"  [options]="shipNameList" [dirty]="ignoreDirty" [error]="orderFormError.shipName" ></bs-select>

        <bs-datepicker formControlName="shippingDate" [fc]="orderForm.get('shippingDate')" [label]="'发运日期:'" [format]="'yyyy-mm-dd hh:MM:ss'" [dirty]="ignoreDirty"  [error]="orderFormError.shippingDate" ></bs-datepicker>

        <bs-select formControlName ="contract" [fc]="orderForm.get('contract')" [label]="'船名:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.contract" ></bs-select>
        <bs-select formControlName ="ladingBill" [fc]="orderForm.get('ladingBill')" [label]="'提单:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.ladingBill" ></bs-select>


        <bs-select formControlName ="businessInvoice" [fc]="orderForm.get('businessInvoice')" [label]="'商业发票:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.businessInvoice" ></bs-select>
        <bs-select formControlName ="upstreamInvoice" [fc]="orderForm.get('upstreamInvoice')" [label]="'上游发票:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.upstreamInvoice" ></bs-select>
        <bs-select formControlName ="originalFactoryInvoice" [fc]="orderForm.get('originalFactoryInvoice')" [label]="'原厂发票:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.originalFactoryInvoice" ></bs-select>

        <bs-select formControlName ="forMe" [fc]="orderForm.get('forMe')" [label]="'FORME:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.forMe" ></bs-select>
        <bs-select formControlName ="loadingReport" [fc]="orderForm.get('loadingReport')" [label]="'装港报告:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.loadingReport" ></bs-select>
        <bs-select formControlName ="unloadingReport" [fc]="orderForm.get('unloadingReport')" [label]="'卸港报告:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.unloadingReport" ></bs-select>
        <bs-select formControlName ="customsDeclaration" [fc]="orderForm.get('customsDeclaration')" [label]="'报关单:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.customsDeclaration" ></bs-select>
        <bs-select formControlName ="goodsRight" [fc]="orderForm.get('goodsRight')" [label]="'货权:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.goodsRight" ></bs-select>
        <bs-select formControlName ="finalStatement" [fc]="orderForm.get('finalStatement')" [label]="'结算单:'"  [options]="fileOptions" [dirty]="ignoreDirty" [error]="orderFormError.finalStatement" ></bs-select>


        <bs-select formControlName ="company" [fc]="orderForm.get('company')" [label]="'所属公司:'"  [options]="companyList" [dirty]="ignoreDirty" [error]="orderFormError.company" ></bs-select>
        <bs-select formControlName ="shipStatus" [fc]="orderForm.get('shipStatus')" [label]="'船舶状态:'"  [options]="shipStatusList" [dirty]="ignoreDirty" [error]="orderFormError.shipStatus" ></bs-select>



        <div class="form-group row">
          <div class="col-10 ml-auto">
            <button type="button" class="btn btn-info " (click)="orderFormSubmit()"  >保存</button>
            <button type="button" class="btn btn-outline-secondary" (click)="showForm(true)" >返回</button>
          </div>
        </div>
      </form>
    </div>
  </div>


  <div class="row">

    <div class="col">
      <form [formGroup]="orderSearchForm"  (keydown.enter)="$event.preventDefault()">

        <div class="form-row ">
          <div class="col-6">
            <bs-select formControlName ="businessName" [fc]="orderSearchForm.get('businessName')" [label]="'业务线:'"  [options]="businessNameList" [addAllOptions]="true"  ></bs-select>
          </div>
          <div class="col-6">
            <bs-select formControlName ="shipName" [fc]="orderSearchForm.get('shipName')" [label]="'船名:'" [options]="shipNameList" [addAllOptions]="true"></bs-select>
          </div>
        </div>

        <!--<div class="form-row ">-->
          <!--<div class="col-3">-->
            <!--<bs-datepicker formControlName="createDateStart" [fc]="orderSearchForm.get('createDateStart')" [label]="'创建时间:'" [labelclass]="'col-4'" [inputclass]="'col-7'" [format]="'yyyy-mm-dd hh:MM:ss'"></bs-datepicker>-->
          <!--</div>-->
          <!--<div class="col-3">-->
            <!--<bs-datepicker formControlName="createDateEnd" [fc]="orderSearchForm.get('createDateEnd')" [label]="'至:'" [labelclass]="'col-1'" [inputclass]="'col-7'" [format]="'yyyy-mm-dd hh:MM:ss'"></bs-datepicker>-->
          <!--</div>-->
          <!--<div class="col-6">-->
            <!--<bs-select formControlName ="status" [fc]="orderSearchForm.get('status')" [label]="'状态:'" [options]="orderStatusList" [addAllOptions]="true"></bs-select>-->
          <!--</div>-->
        <!--</div>-->

        <div class="form-group row">
          <div class="col-11 ml-auto">
            <button type="button" class="btn btn-info " (click)="getOrderList()"  >查询</button>
          </div>
        </div>
      </form>


      <table class="table table-bordered table-hover table-responsive" >
        <thead>
        <tr>
          <th>ID</th>
          <th>业务线</th>
          <th>船名</th>
          <th>发运日期</th>

          <th>合同</th>
          <th>提单</th>
          <th>商业发票</th>
          <th>上游发票</th>
          <th>原厂发票</th>

          <th>FORME</th>
          <th>装港报告</th>
          <th>卸港报告</th>
          <th>报关单</th>
          <th>货权</th>
          <th>结算单</th>

          <th>所属公司</th>
          <th>船舶状态</th>

          <th></th>
        </tr>
        </thead>
        <tbody>


        <tr *ngFor="let order of orderList; trackBy: trackByFn">
          <td> <a class="btn btn-link btn-sm"  role="button"> {{order.id}}</a></td>
          <td> {{order.businessName | findKey : businessNameList : 'name'}}</td>
          <td> {{order.shipName | findKey : shipNameList : 'name'}}</td>
          <td> {{order.shippingDate | slice : 0 : 10}}</td>
          <td> {{order.contract | findKey : fileOptions : 'name'}}</td>
          <td> {{order.ladingBill | findKey : fileOptions : 'name'}}</td>


          <td> {{order.businessInvoice | findKey : fileOptions : 'name'}}</td>
          <td> {{order.upstreamInvoice | findKey : fileOptions : 'name'}}</td>
          <td> {{order.originalFactoryInvoice | findKey : fileOptions : 'name'}}</td>

          <td> {{order.forMe | findKey : fileOptions : 'name'}}</td>
          <td> {{order.loadingReport | findKey : fileOptions : 'name'}}</td>
          <td> {{order.unloadingReport | findKey : fileOptions : 'name'}}</td>
          <td> {{order.customsDeclaration | findKey : fileOptions : 'name'}}</td>
          <td> {{order.goodsRight | findKey : fileOptions : 'name'}}</td>
          <td> {{order.finalStatement | findKey : fileOptions : 'name'}}</td>

          <td> {{order.company | findKey : companyList : 'name'}}</td>
          <td> {{order.shipStatus | findKey : shipStatusList : 'name'}}</td>

          <td>
            <button class="btn btn-link btn-sm" (click)="showForm(false, order)"> 修改 </button>
            <button class="btn btn-link btn-sm" (click)="deleteItem(order)"> 删除 </button>
          </td>
        </tr>
        </tbody>
      </table>



  </div>
  </div>



</div>

